<!DOCTYPE html>
<html>
  <style>

h1 {
  text-align: center;

}

#CookieDiv {
  height: 300px;
  width: 50%;
  margin: auto;
  text-align: center;

}

#BreadBaker {
  position: absolute;
  bottom: 20px;
}

#BenWebsite {
  position: absolute;
  bottom: 0;
}

#Baker {
  margin: auto;
  vertical-align: middle;

}


#buttonsAndText {
  margin: auto;
  width: 50%;
  text-align: center;

}

#SideButtons {
  position: absolute;
  top: 0px;
  right: 30px;

}

#BuyFactory {
  position: relative;
  top: 30px;

}

#BuyMine {
  position: relative;
  top: 20px;

}

#BuyFarm {
  position: relative;
  top: 10px;

}

button {
  padding-left: 35px;
  padding-right: 35px;
  padding-top: 10px;
  padding-bottom: 10px;
  border-radius: 30px;
  display: block;
  margin: auto;
  border-color: #ff7f00;
}

#Baker {
  margin-left: auto;
  margin-right: auto;
}

  </style>

  <body>

    <meta name="viewport" content="width=device-width, initial-scale=1">

    <div id="BreadBaker">

      <p> <a href="/AWS-Website/clicker.html">Play BakeBread, a parody of cookie clicker!</a> </p>

    </div>

    <div id="BenWebsite">

      <p> <a href="http://bentitus13.com/">Also, see more talent at the website of the creator of BakeBread!</a> </p>

    </div>


    <h1 style="color:red;">Cookie Clicker!</h1>

    <div id="CookieDiv">

      <img id="Baker" src="/cookie.png" onclick="addCookies()"/>

    </div>

    <div id="buttonsAndText">

      <p id="numberOfCookies">You have 0 cookies!</p>

      <p id="howManyYouGet">You get 1 cookie per click!</p>

      <p id="cookiesPerGrandma"></p>

      <p id="howManyFarms"></p>

      <p id="howManyMines"></p>

      <p id="howManyFactories"></p>

    </div>

    <button id="addAdd" onclick="moreCookiesPerClick()">Increase cookies per click</button>

    <div id="SideButtons">

      <h1 style="color:#f442e2;">Get auto bakers!</h1>

      <button id="BuyGrandma" onclick="addGrandma()">Buy a Grandma!</button>

      <button id="BuyFarm" onclick="addFarm()">Buy a Farm!</button>

      <button id="BuyMine" onclick="addMine()">Buy a Mine!</button>

      <button id="BuyFactory" onclick="addFactory()">Buy a Factory!</button>

    </div>

    <p id="cookiesYouNeedToPay"></p>

    <p id="cookiesYouNeedToGet"></p>

    <p id="x5"></p>

    <p id="TMP"></p>

    <p id="howManyYouGet"></p>

    <p id="costOfGrandma"></p>

    <p id="cookiesPerGrandma"></p>

    <p id="numberOfGrandmas"></p>

    <p id="randomNumber"></p>

    <script>


//TODO: Make it so that you can find treasure chests.
var cookies = 0;
var cookiesPerClick = 1;
var cost = 2;
var add = 2
var fibonacci1 = 1;
var fibonacci2 = 0;
var currentFibonacci;

var cookiesUntilUpgrade = cost - cookies;
var shownButton = 0;

var isGrandmaRunning = 0;
var numGrandma = 0;
var grandmaCost = 10;

var isFarmRunning = 0
var numFarm = 0
var farmCost = 100

var isMineRunning = 0
var numMine = 0
var mineCost = 1100

var isFactoryRunning = 0
var numFactory = 0
var factoryCost = 12000


document.getElementById("Baker").style.height='300px';
document.getElementById("BuyGrandma").style.background='#000000';
document.getElementById("BuyGrandma").style.color='#000000';
document.getElementById("addAdd").style.background='#CCCCCC';
document.getElementById("addAdd").style.visibility='hidden';
document.body.style.backgroundColor = "#000000";

updateDisplay();
callUpdateDisplay();

function callUpdateDisplay() {
  updateDisplay();
  setTimeout(function(){
    callUpdateDisplay();
  }, 50);


}


function getNextFibonacci() {
  currentFibonacci = fibonacci1 + fibonacci2
    fibonacci2 = fibonacci1
    fibonacci1 = currentFibonacci
    return currentFibonacci

}

function getFibonacciByNumber(num) {
  if(num == 1){
    return 1;
  }
  if(num == 2){
    return 2;
  }
  return getFibonacciByNumber(num-1) + getFibonacciByNumber(num-2);

}

function testChancesGrandma() {

  var randomNumberGrandma = Math.floor(Math.random()*10000)

    if (randomNumberGrandma == 2) {
      cookies = cookies * 5
        sayYouGotCookies();
    }

}


function testChances() {

  var randomNumber = Math.floor(Math.random()*1000)

    if (randomNumber == 2) {
      cookies = cookies * 2
        sayYouGotCookies();
    }

}


function sayYouGotCookies() {
  document.getElementById("x5").innerHTML = "You just got 2 times the amount of cookies!"
    document.getElementById("x5").style.color='#915e00';
  setTimeout(function(){
    document.getElementById("x5").innerHTML = ""
  }, 5000);


}



function updateDisplay() {


  //  document.getElementById("TMP").innerHTML = String()process.cwd()
  if (cookies == 1) {
    document.getElementById("numberOfCookies").innerHTML = "You have 1 cookie!"
  }
  else {
    document.getElementById("numberOfCookies").innerHTML = "You have " + convertToDisp(cookies) + " cookies!";
  }
  document.getElementById("numberOfCookies").style.color = "#429ef4";
  document.getElementById("numberOfCookies").style.fontSize = "14px";
  document.getElementById("cookiesPerGrandma").innerHTML = "You have " + numGrandma + " Grandmas!";
  document.getElementById("cookiesPerGrandma").style.color = "#429ef4";
  document.getElementById("BuyGrandma").innerHTML = "Buy a grandma! <br/> You need to pay " + grandmaCost + " cookies!";
  document.getElementById("BuyFarm").innerHTML = "Buy a farm! <br/> You need to pay " + farmCost + " cookies!";
  document.getElementById("BuyMine").innerHTML = "Buy a mine! <br/> You need to pay " + mineCost + " cookies!";
  document.getElementById("BuyFactory").innerHTML = "Buy a Factory! <br/> You need to pay " + factoryCost + " cookies!";
  document.getElementById("howManyYouGet").innerHTML = "You get " + cookiesPerClick + " cookies per click!";
  document.getElementById("howManyYouGet").style.color = "#429ef4";
  document.getElementById("howManyYouGet").style.fontSize = "14px";
  document.getElementById("howManyFarms").innerHTML = "You have " + numFarm + " Farms!"
    document.getElementById("howManyFarms").style.color = "#429ef4"
    document.getElementById("howManyMines").innerHTML = "You have " + numMine + " Mines!"
    document.getElementById("howManyMines").style.color = "#429ef4"
    document.getElementById("howManyFactories").innerHTML = "You have " + numFactory + " Factories!"
    document.getElementById("howManyFactories").style.color = "#429ef4"
    //document.getElementById("addAdd").innerHTML = "Increase cookies per click <br/> You need " + (cost - cookies) +" cookies"

    if (isGrandmaRunning == false){
      document.getElementById("BuyMine").style.visibility="hidden";

    }

    else {
      document.getElementById("BuyMine").style.visibility="visible";

    }




  if (isFarmRunning == false){
    document.getElementById("BuyFactory").style.visibility="hidden";

  }

  else {
    document.getElementById("BuyFactory").style.visibility="visible";

  }




  if (cookies >= cost){
    document.getElementById("addAdd").style.background='#ff7f00';
  }
  else{
    document.getElementById("addAdd").style.background='#CCCCCC';
  }



  if (cookies >= grandmaCost){
    document.getElementById("BuyGrandma").style.background='#ff7f00';

  }
  else {
    document.getElementById("BuyGrandma").style.background='#CCCCCC'
  }

  if((isGrandmaRunning == 0) && (cookies <= grandmaCost)){
    document.getElementById("BuyGrandma").style.background='#000000'
  }





  if (cookies >= farmCost){
    document.getElementById("BuyFarm").style.background='#ff7f00';

  }
  else {
    document.getElementById("BuyFarm").style.background='#CCCCCC'
  }

  if((isFarmRunning == 0) && (cookies <= farmCost)){
    document.getElementById("BuyFarm").style.background='#000000'
  }




  if (cookies >= mineCost){
    document.getElementById("BuyMine").style.background='#ff7f00';

  }
  else {
    document.getElementById("BuyMine").style.background='#CCCCCC'
  }

  if((isMineRunning == 0) && (cookies <= mineCost)){
    document.getElementById("BuyMine").style.background='#000000'
  }







  if (cookies >= factoryCost){
    document.getElementById("BuyFactory").style.background='#ff7f00';

  }
  else {
    document.getElementById("BuyFactory").style.background='#CCCCCC'
  }

  if((isFactoryRunning == 0) && (cookies <= factoryCost)){
    document.getElementById("BuyFactory").style.background='#000000'
  }


  //if (cost > cookies) {
  //document.getElementById("cookiesYouNeedToGet").innerHTML = "You need to get " + cookiesUntilUpgrade + " cookies until you can upgrade!"
  //}
  //else {

  //document.getElementById("cookiesYouNeedToGet").innerHTML = "You can upgrade now because you have enough cookies!"

  //}

}

function runGrandma() {

  setTimeout(function(){
    cookies = Math.round(cookies + (numGrandma * 1));
    runGrandma();
    updateDisplay();
    testChancesGrandma();
  }, 10000);


}

function addGrandma() {

  if (cookies >= grandmaCost) {
    if(isGrandmaRunning == 1){
      //Increase something or other
      numGrandma = numGrandma + 1
        cookies = cookies - grandmaCost;
      grandmaCost = Math.round(1.15*grandmaCost);
      document.getElementById("cookiesPerGrandma").innerHTML = "You have " + numGrandma + " grandmas!"
    }
    else{
      runGrandma();
      isGrandmaRunning = 1
        numGrandma = 1
        cookies = cookies - grandmaCost
        grandmaCost = Math.round(1.15*grandmaCost);
    }
    updateDisplay();

  }


}

function addFarm() {
  if (cookies >= farmCost) {
    if(isFarmRunning == 1){
      numFarm = numFarm + 1
        cookies = cookies - farmCost;
      farmCost = Math.round(1.15*farmCost);
      updateDisplay();
      document.getElementById("howManyFarms").innerHTML = "You have " + numFarm + " Farms!"
    }
    else{
      runFarm();
      isFarmRunning = 1
        numFarm = 1
        cookies = cookies - farmCost
        farmCost = Math.round(1.15*farmCost);
      updateDisplay();
    }
  }
}

function runFarm() {

  setTimeout(function(){
    cookies = Math.round(cookies + (numFarm * 1))
      updateDisplay();
    runFarm();
  }, 1000);
}








function addMine() {
  if (cookies >= mineCost) {
    if(isMineRunning == 1){
      numMine = numMine + 1
        cookies = cookies - mineCost;
      mineCost = Math.round(1.15*mineCost);
      updateDisplay();
      document.getElementById("howManyMines").innerHTML = "You have " + numMine + " Mines!"
    }
    else{
      runMine();
      isMineRunning = 1
        numMine = 1
        cookies = cookies - mineCost
        mineCost = Math.round(1.15*mineCost);
      updateDisplay();
    }
  }
}

function runMine() {

  setTimeout(function(){
    cookies = Math.round(cookies + (numMine * 1))
      updateDisplay();
    runMine();
  }, 125);
}








function addFactory() {
  if (cookies >= factoryCost) {
    if(isFactoryRunning == 1){
      numFactory = numFactory + 1
        cookies = cookies - factoryCost;
      factoryCost = Math.round(1.15*factoryCost);
      updateDisplay();
      document.getElementById("howManyFactories").innerHTML = "You have " + numFactory + " Factories!"
    }
    else{
      runFactory();
      isFactoryRunning = 1
        numFactory = 1
        cookies = cookies - factoryCost
        factoryCost = Math.round(1.15*factoryCost);
      updateDisplay();
    }
  }
}

function runFactory() {

  setTimeout(function(){
    cookies = Math.round(cookies + (numFactory * 13))
      updateDisplay();
    runFactory();
  }, 250);
}


function addCookies() {
  cookies = cookies + cookiesPerClick;
  document.getElementById("Baker").style.height='290px';
  setTimeout(function(){
    document.getElementById("Baker").style.height='300px';
  }, 100);
  updateDisplay();
  testChances();
  testCookiesPerClick();



}

function moreCookiesPerClick() {
  hello
}


function convertToDisp(num) {
  var numCopy = num
    var count = 0
    while (numCopy > 10) {
      numCopy /= 10
        count++

    }
  if (count > 2) {
    var countCopy = count
      var newCount = 0
      while (countCopy > 0) {
        countCopy -= 3
          newCount++

      }   
    var i
      for (i=0; i < newCount; i++) {
        num /= 100

      }

  }
  num = Math.round(num)
    var ret
    switch (newCount) {
      case 0:
        ret = ""
          break;

      case 1:
        ret = " thousand"
          break;

      case 2:
        ret = " million"
          break;

      case 3:
        ret = " billion"
          break;

      case 4:
        ret = " trillion"
          break;

      case 5:
        ret = " quadrillion"
          break;

      case 6:
        ret = " quintillion"
          break;

      case 7:
        ret = " sextillion"
          break;

      case 8:
        ret = " septillion"
          break;

      case 9:
        ret = " octillion"
          break;

      case 10:
        ret = " nonillion"
          break;

      case 11:
        ret = " decillion"
          break;

      case 12:
        ret = " undecillion"
          break;

      default:
        ret = ""
          break;

    }

  if (newCount > 0) {
    return num/10 + ret

  } else {
    return num

  }

}



    </script>

  </body>
</html>
